 <!DOCTYPE html>
<html lang="kor" xmlns:th="http://www.thymeleaf.org">
 	
 <div th:replace = "~{xdm/include/form_head :: head}"></div>

  <main id="main" class="main">
  <div>
    <div class = "col cen">  <!-- 중앙 부분  기본정보-->
      <div class = "row a name">
        <div>
          <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
              <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Page1</a></li>
                <li class="breadcrumb-item"><a href="#">Page2</a></li>
                <li class="breadcrumb-item active" aria-current="page">Default</li>
              </ol>
          </nav>
          <label for="exampleFormControlInput1" class="form-label par"><strong>Member</strong></label> 
        </div>
      </div> <!-- 공통복사 부분 end-->

      <div class = "row a centerh">
        <div class = "wrap">
          <div class = "row userbox">
            <div class = "col-12">
              <p>기본정보</p>
            </div>
          </div>
        </div>
        <div class = "wrap2">
          <form action="memberXdmInst" method="post" id="form" class="row needs-validation" novalidate>  
            <div class = "row">
           		<div class="col-3"><label for="name" class="form-label" >사용자이름</label><span style="color: crimson;">*</span>
                	<input type="text" class="form-control" id="name" aria-label="Disabled input example" name ="name">
                	<div class="invalid-feedback" id ="nameError">Please select a valid state.
                  </div></div>
              	<div class = "col-3">
                	<label for="exampleFormControlInput2" class="form-label">성별</label><span style="color: crimson;">*</span>
                  	<select class="form-select" aria-label="Default select example" name ="gender" id="gender">
                  		<option value ="">선택하세요</option>
                    	<option th:each="list : ${@codeService.selectListCachedCode(2)}" th:value="${list.cd_id}" th:text="${list.cd_name}" th:selected="${list.cd_id} == ${item?.gender}"></option>
                  	</select><div class="invalid-feedback" id ="genderError">Please select a valid state.</div>
              	</div>
              	<div class="col-3"><label for="birthday" class="form-label">생일</label><span style="color: crimson;">*</span> 
                	<input type="text" class="form-control" id="birthday" name ="birthday" placeholder="생년월일" required>
                <div class="invalid-feedback" id ="birthdayError">Looks good!</div></div>
                <div class="col-3"><label for="clearance" class="form-label">고유통관번호</label><span style="color: crimson;">*</span>
                	<input type="text" class="form-control" id="clearance" placeholder="고유통관번호" required name="clearance">
                <div class="invalid-feedback" id="clearanceError">Looks good!</div></div>
            </div>
          
            <div class = "row">
              <div class="col-3"><label for="user_id" class="form-label" >코드</label> 
                <input type="text" class="form-control" id="user_id" aria-label="Disabled input example" name ="user_id" disabled></div>
              <div class="col-3"><label for="exampleFormControlInput6" class="form-label" >아이디</label><span style="color: crimson;">*</span> 
                <input type="text" class="form-control" id="id" required name ="id">
                <div class="invalid-feedback" id="idError">Looks good!</div></div>
              <div class="col-3"><label for="email" class="form-label">이메일</label><span style="color: crimson;">*</span> 
                <input type="text" class="form-control" id="email" placeholder="이메일형식" required name="email">
                <div class="invalid-feedback" id="emailError">Looks good!</div></div>
              <div class="col-3"><label for="password" class="form-label">패스워드</label><span style="color: crimson;">*</span>
                <input type="text" class="form-control" id="password" placeholder="특수문자, 영어대소문자, 숫자를 하나씩 입력" required name="password">
                <div class="invalid-feedback" id="passwordError">Looks good!</div></div>
            </div>
          
          
            <div class = "row">
              <div class = "col-3"><label for="user_delny" class="form-label">삭제여부</label><span style="color: crimson;">*</span> 
                <select class="form-select" aria-label="Default select example" id="user_delny" required name ="user_delny">
                  <option selected value="">선택하세요</option>
                  <option value="true">미삭제</option>
                  <option value="false">삭제</option>
                </select><div class="invalid-feedback" id="user_delnyError">
                    Please select a valid state.
                  </div></div>
              <div class = "col-3"><label for="address" class="form-label">주소</label> 
                <input type="text" class="form-control" id="address" name ="address">
                <div class="invalid-feedback" id="addressError">
                  Please select a valid state.
                </div></div>
            </div>
            
            <div class = "row">
              <div class = "col-6 ">
                <label for="exampleFormControlTextarea1" class="form-label zero"> 설명 </label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
               </div>
            </div>
            <div class = "row rowbotton">
              <div class="col-1">
                <div class ="justify-content-start" style="display: flex;">
                  <a href="memberXdmList"><button type="button" class="btn btn-outline-dark"><i class="bi bi-list-task"></i></button></a>
                </div>
              </div>
              <div class ="col-10"></div>
              <div class="col-1 ">
                <div class ="justify-content-end" style="display: flex;">
                  <button class="btn btn-primary" type="submit" id="member_submit"><i class="bi bi-server"></i></button>
                </div>
              </div>
            </div>
          </form>
        </div>
      </div> 
   	 </div>
	</div>

  </main><!-- End #main -->
  <script type="text/javascript">
  document.getElementById("member_submit").addEventListener("click",function(event){
		event.preventDefault();
		
		
		document.getElementById("name").classList.remove("is-invalid");
		document.getElementById("name").classList.remove("is-valid");
		
	    document.getElementById("gender").classList.remove("is-invalid");
	    document.getElementById("gender").classList.remove("is-valid");
	   
	    document.getElementById("birthday").classList.remove("is-invalid");
	    document.getElementById("birthday").classList.remove("is-valid");
	   
	    document.getElementById("clearance").classList.remove("is-invalid");
	    document.getElementById("clearance").classList.remove("is-valid");
	    
	    document.getElementById("id").classList.remove("is-invalid");
	    document.getElementById("id").classList.remove("is-valid");
	    
	    document.getElementById("email").classList.remove("is-invalid");
	    document.getElementById("email").classList.remove("is-valid");
	    
	    document.getElementById("password").classList.remove("is-invalid");
	    document.getElementById("password").classList.remove("is-valid");
	    
	    document.getElementById("user_delny").classList.remove("is-invalid");
	    document.getElementById("user_delny").classList.remove("is-valid");
	    
	    
		
		document.getElementById("nameError").textContent = '';  		
  		document.getElementById("genderError").textContent = '';
  		document.getElementById("birthdayError").textContent = '';
 		document.getElementById("clearanceError").textContent = '';
 		document.getElementById("idError").textContent = '';
 		document.getElementById("emailError").textContent = '';
 		document.getElementById("passwordError").textContent = '';
 		document.getElementById("user_delnyError").textContent = '';
      	      
		let isValid = true; 
	    
		
		const name = document.getElementById("name").value;
		let n = /^[가-힣]{2,5}$/;
		if(name == null || name == ""){
			document.getElementById("nameError").textContent = "이름을 넣어주세요.";
			document.getElementById("name").classList.add("is-invalid");
			isValid = false;
		}else if(name.trim() != name){
			document.getElementById("nameError").textContent = "띄어쓰기를 제거해주세요.";
			document.getElementById("name").classList.add("is-invalid");
			isValid = false;
		}else if(!n.test(name)){
			document.getElementById("nameError").textContent = "한글이름이 2~5글자 사이가 아닙니다.";
			document.getElementById("name").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("codeGroup_cg_id").classList.add("is-valid");
		}
	    
		const gender = document.getElementById("gender").value;
		if(gender == null || gender == ""){
			document.getElementById("genderError").textContent = "성별을 선택해주세요";
			document.getElementById("gender").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("gender").classList.add("is-valid");
		}
		
		const birthday = document.getElementById("birthday").value; 
		let bir = /^([0-9]{4})-?([0-9]{2})-?([0-9]{2})$/;
		if(!bir.test(birthday)){
			document.getElementById("birthdayError").textContent = "xxxx-xx-xx의 형식에 맞는 날짜를 입력해주세요.";
			document.getElementById("birthday").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("birthday").classList.add("is-valid");
		}
		
 	    const clearance = document.getElementById("clearance").value;
 	   	let iciNoRule = /^(p|P)[1-6]{1}[0-9]{11}$/;
 		 if(!iciNoRule.test(clearance)){
			document.getElementById("clearanceError").textContent = "p와 12자리의 값을 입력해주세요.";
			document.getElementById("clearance").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("clearance").classList.add("is-valid");
		}
 		 
 		const id = document.getElementById("id").value;
 		let expIdText = /^[A-Za-z0-9]{4,10}$/;
		if(id == null || id == ""){
			document.getElementById("idError").textContent = "아이디를 입력해주세요.";
			document.getElementById("id").classList.add("is-invalid");
			isValid = false;
		}else if(id.trim() != id){
			document.getElementById("idError").textContent = "띄어쓰기를 제거해주세요.";
			document.getElementById("id").classList.add("is-invalid");
			isValid = false;
		}else if(!expIdText.test(name)){
			document.getElementById("idError").textContent = "숫자 영어로 구성된 4~10자리의 아이디를 만드세요.";
			document.getElementById("id").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("id").classList.add("is-valid");
		} 
 		 
 		 
		const email = document.getElementById("email").value;
		let regEmail = /^[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
 		 if(!regEmail.test(email)){
			document.getElementById("emailError").textContent = " 올바른 이메일 형식을 입력해주세요.";
			document.getElementById("email").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("email").classList.add("is-valid");
		}
		
		
		const password = document.getElementById("password").value;
		var reg = /^(?=.*[a-zA-Z])(?=.*[!@#$%^*+=-])(?=.*[0-9]).{8,15}$/
	 	if(!reg.test(password)){
			document.getElementById("passwordError").textContent = "적어도 하나의 영문자, 숫자,특수문자(!@#$%^*+=-)를 포함한 패스워드를 입력하세요.";
			document.getElementById("password").classList.add("is-invalid");
			isValid = false;
		}else{
			document.getElementById("password").classList.add("is-valid");
		}
 		 
		const cg = document.getElementById("user_delny").value;
  		if(cg == null || cg == ""){
  			document.getElementById("user_delnyError").textContent = "사용여부를 선택해주세요";
  			document.getElementById("user_delny").classList.add("is-invalid");
  			isValid = false;
  		}else{
  			document.getElementById("user_delny").classList.add("is-valid");
  		}
 		 
 		 
		if(isValid){
			console.log("폼 제출"); 
			document.getElementById("form").submit();
		}else {
          console.log("유효성 검사 실패: 폼 제출 안 함");
      }
	});
  </script>

  <!-- ======= Footer ======= -->
<div th:replace = "~{xdm/include/footer::footer}"></div>

</html>